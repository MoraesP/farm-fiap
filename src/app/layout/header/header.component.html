<nav class="navbar navbar-expand navbar-light shadow-sm navbar-custom">
  <div class="container-fluid p-0">
    <!-- Espaçador para empurrar o conteúdo para a direita -->
    <div class="flex-grow-1"></div>

    <!-- Conteúdo do usuário -->
    <div class="d-flex align-items-center">
      <!-- Sino de notificações -->
      <div class="dropdown me-3">
        <button
          class="btn btn-link position-relative"
          type="button"
          id="notificacoesDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
          (click)="toggleNotificacoes()"
        >
          <i class="fas fa-bell fa-lg"></i>
          <span
            *ngIf="(notificacaoService.naoLidas$ | async) > 0"
            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
          >
            {{ notificacaoService.naoLidas$ | async }}
            <span class="visually-hidden">notificações não lidas</span>
          </span>
        </button>
        <div
          class="dropdown-menu dropdown-menu-end notificacoes-dropdown"
          aria-labelledby="notificacoesDropdown"
        >
          <div
            class="dropdown-header d-flex justify-content-between align-items-center"
          >
            <h6 class="mb-0">Notificações</h6>
            <button
              *ngIf="(notificacaoService.naoLidas$ | async) > 0"
              class="btn btn-sm btn-link text-decoration-none"
              (click)="marcarTodasComoLidas()"
            >
              Marcar todas como lidas
            </button>
          </div>
          <div class="notificacoes-container">
            <ng-container
              *ngIf="
                (notificacaoService.notificacoes$ | async)?.length;
                else semNotificacoes
              "
            >
              <a
                *ngFor="
                  let notificacao of notificacaoService.notificacoes$ | async
                "
                class="dropdown-item notificacao-item"
                [class.nao-lida]="!notificacao.lida"
                href="javascript:void(0)"
                (click)="marcarComoLida(notificacao)"
              >
                <div class="d-flex align-items-start">
                  <div class="notificacao-icone me-2">
                    <i
                      class="fas"
                      [ngClass]="{
                        'fa-warehouse': notificacao.tipo === 'LOCAL_DISPONIVEL',
                        'fa-dollar-sign': notificacao.tipo === 'NOVA_VENDA',
                        'fa-info-circle': notificacao.tipo === 'SISTEMA'
                      }"
                    ></i>
                  </div>
                  <div class="notificacao-conteudo">
                    <div class="notificacao-titulo">
                      {{ notificacao.titulo }}
                    </div>
                    <div class="notificacao-mensagem">
                      {{ notificacao.mensagem }}
                    </div>
                    <div class="notificacao-data">
                      {{ notificacao.data | date : "dd/MM/yyyy HH:mm" }}
                    </div>
                  </div>
                </div>
              </a>
            </ng-container>
            <ng-template #semNotificacoes>
              <div class="dropdown-item text-center py-3">
                <i class="fas fa-bell-slash text-muted mb-2"></i>
                <p class="mb-0">Você não tem notificações.</p>
              </div>
            </ng-template>
          </div>
        </div>
      </div>

      <div class="text-end">
        <div class="fw-bold">{{ userState.nomeUsuario }}</div>
        <small class="text-muted">{{
          getPerfilNome(usuarioAtual?.perfil)
        }}</small>
      </div>
    </div>
  </div>
</nav>
