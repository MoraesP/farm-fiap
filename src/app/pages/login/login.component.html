<div class="d-flex justify-content-center align-items-center min-vh-100">
  <div class="card shadow-sm p-4" style="width: 100%; max-width: 400px">
    <div class="text-center mb-4">
      <i class="fas fa-tractor fa-3x text-primary"></i>
      <h2 class="mt-2">FIAP Farms</h2>
      <p class="text-muted">Acesse sua conta de cooperado</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-control"
          [class.is-invalid]="
            loginForm.get('email')?.invalid && loginForm.get('email')?.touched
          "
          autocomplete="email"
        />
        <div
          *ngIf="
            loginForm.get('email')?.invalid && loginForm.get('email')?.touched
          "
          class="invalid-feedback"
        >
          <span *ngIf="loginForm.get('email')?.errors?.['required']"
            >Email é obrigatório.</span
          >
          <span *ngIf="loginForm.get('email')?.errors?.['email']"
            >Formato de email inválido.</span
          >
        </div>
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Senha</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          class="form-control"
          [class.is-invalid]="
            loginForm.get('password')?.invalid &&
            loginForm.get('password')?.touched
          "
          autocomplete="current-password"
        />
        <div
          *ngIf="
            loginForm.get('password')?.invalid &&
            loginForm.get('password')?.touched
          "
          class="invalid-feedback"
        >
          <span *ngIf="loginForm.get('password')?.errors?.['required']"
            >Senha é obrigatória.</span
          >
        </div>
      </div>

      <div class="alert alert-danger mt-3" *ngIf="loginError">
        {{ errorMessage }}
      </div>

      <button
        type="submit"
        class="btn btn-primary w-100"
        [disabled]="loginForm.invalid || desabilitado"
      >
        <span
          *ngIf="carregandoLogin"
          class="spinner-border spinner-border-sm me-2"
        ></span>
        Entrar
      </button>

      <div class="d-flex align-items-center my-3">
        <hr class="flex-grow-1" />
        <span class="mx-2 text-muted">ou</span>
        <hr class="flex-grow-1" />
      </div>

      <button
        type="button"
        class="btn btn-outline-danger w-100 mb-3 d-flex align-items-center justify-content-center"
        (click)="loginWithGoogle()"
        [disabled]="desabilitado"
      >
        <span
          *ngIf="carregandoGoogle"
          class="spinner-border spinner-border-sm me-2"
        ></span>
        <i class="fab fa-google me-2"></i>
        Entrar com Google
      </button>

      <hr />

      <div class="text-center">
        <p class="mb-0">
          Não tem uma conta?
          <a
            href="javascript:void(0)"
            (click)="register()"
            class="fw-bold text-decoration-none"
            >Registre-se</a
          >
        </p>
      </div>
    </form>
  </div>

<!-- Modal para completar o perfil -->
<app-complete-profile-modal
  [show]="showCompleteProfileModal"
  [usuario]="tempUserForModal"
  (salvarEvent)="handleCompleteProfile($event)"
  (fecharEvent)="handleCloseModal()"
></app-complete-profile-modal>
